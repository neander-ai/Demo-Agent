State flow interrupts and edga cases